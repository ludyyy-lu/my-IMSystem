syntax = "proto3";
package user; 
option go_package = "./user;user";

// 用户基本信息
message UserInfo {
  int64 id = 1;
  string nickname = 2;
  string avatar = 3;
  string bio = 4;
  int64 created_at = 5; // 创建时间
  bool disabled = 6; // 是否被禁用
  int32 gender = 7; // 性别，0: 未知, 1: 男, 2: 女
}
// 获取用户个人资料
message GetProfileReq {
  int64 uid = 1;
}
message GetProfileResp {
  UserInfo user = 1; // 用户信息
  // 这里可以添加更多的用户信息字段
}
// 更新用户资料
message UpdateProfileReq {
  int64 userId = 1;
  string nickname = 2;
  string avatar = 3;
  string bio = 4; // 个性签名/简介
}
message UpdateProfileResp {
  bool success = 1;
}
// 批量获取用户信息
// 这个请求可以用于获取多个用户的基本信息
message BatchGetUsersReq {
  repeated int64 uids = 1;
}
message BatchGetUsersResp {
  repeated UserInfo users = 1;
}

// 搜索用户
// 这个请求可以用于根据关键词搜索用户
message SearchUserReq {
  string keyword = 1;
}
message SearchUserResp {
  repeated UserInfo results = 1;
}


// 服务定义（RPC 接口）
service User {
  rpc GetProfile(GetProfileReq) returns (GetProfileResp);
  rpc UpdateProfile(UpdateProfileReq) returns (UpdateProfileResp);
  rpc BatchGetUsers(BatchGetUsersReq) returns (BatchGetUsersResp);
  rpc SearchUser(SearchUserReq) returns (SearchUserResp);
}

// goctl rpc protoc common/proto/user/user.proto \
//   --go_out=./user-service \
//   --go-grpc_out=./user-service \
//   --zrpc_out=./user-service \
//   --style=go_zero
